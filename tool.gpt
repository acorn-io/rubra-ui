tools: service, port, get-operating-system, open-file, open, start-file, start

Run the service.
Get the port for the running service.
Get the operating system.
A file can be local or remote. For the provided file, do one of the following two options:
    1. If it is a URL or starts with github.com, do not edit it.
    2. If it is a file, trim the directory from the file and remove the '.gpt' suffix.
If a file or URL is provided and the operating system is Windows, then use the start-file tool. Otherwise, use the open-file tool.
If there is no file or URL and the operating system is Windows, use the start tool. Otherwise, use the open tool.

---
name: service

#!sys.daemon /usr/bin/env npm run --prefix ${GPTSCRIPT_TOOL_DIR} dev

---

name: port
tools: service
description: Get the port for the running service

#!http://service.daemon.gptscript.local/api/port

---

name: get-operating-system

#!/usr/bin/env python3

import platform

print(platform.system())

---

name: open-file
arg: port: The port the service is listening on
arg: file: The file to open

#!/usr/bin/env sh

open http://localhost:${PORT}/run?file=${FILE}

---

name: open
arg: port: The port the service is listening on

#!/usr/bin/env sh

open http://localhost:${PORT}

---

name: start-file
arg: port: The port the service is listening on
arg: file: The file to open

#!/usr/bin/env powershell.exe

start http://localhost:$env:PORT/run?file=$env:FILE

---

name: start
arg: port: The port the service is listening on

#!/usr/bin/env sh

open http://localhost:$env:PORT
